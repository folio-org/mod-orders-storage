{
  "scripts": [
    {
      "run": "after",
      "snippet": "CREATE OR REPLACE VIEW receiving_history_view AS SELECT pieces.id AS id, json_build_object('id', pieces.jsonb->>'id', 'caption', pieces.jsonb->>'caption', 'comment', pieces.jsonb->>'comment','dateOrdered', purchase_order.jsonb->>'dateOrdered','itemId', pieces.jsonb->>'itemId', 'poLineId', pieces.jsonb->>'poLineId', 'poLineNumber', po_line.jsonb->>'po_line_number', 'purchaseOrderId', po_line.jsonb->>'purchase_order_id','receivedDate', pieces.jsonb->>'receivedDate', 'title', po_line.jsonb->>'title', 'receivingNote', details.jsonb->>'receiving_note', 'receivingStatus', pieces.jsonb->>'receivingStatus', 'supplement', pieces.jsonb->>'supplement') AS jsonb FROM pieces LEFT OUTER JOIN po_line ON pieces.jsonb->>'poLineId' = po_line.jsonb->>'id' LEFT OUTER JOIN details ON details.jsonb->>'po_line_id' = po_line.jsonb->>'id' LEFT OUTER JOIN purchase_order ON po_line.jsonb->>'purchase_order_id' = purchase_order.jsonb->>'id';",
      "fromModuleVersion": "1.0"
    }
  ],
  "tables": [
    {
      "tableName": "adjustment",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "alert",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "claim",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "cost",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "details",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "eresource",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "fund_distribution",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "license",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "location",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "physical",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "pieces",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "reporting_code",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "source",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "vendor_detail",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    },
    {
      "tableName": "purchase_order",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true,
      "customSnippetPath": "purchase_order_table.sql"
    },
    {
      "tableName": "po_line",
      "generateId": true,
      "fromModuleVersion": 1.0,
      "withMetadata": true,
      "populateJsonWithId": true
    }
  ]
}
